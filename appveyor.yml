image: WMF 5
version: 1.0.0 (Build {build})

environment: 
  CODE_SIGNING_CERTIFICATE_PVK_TEXT:
    secure: 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
  CODE_SIGNING_CERTIFICATE_SPC_TEXT:
    secure: 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

init:

clone_script:
  - ps: >-
      if ( -not $env:appveyor_pull_request_number ) {
        git clone -q --branch=$env:appveyor_repo_branch https://github.com/$env:appveyor_repo_name.git $env:appveyor_build_folder
        git checkout -qf $env:appveyor_repo_commit
        git submodule update -q --init --recursive
      } else {
        git clone -q https://github.com/$env:appveyor_repo_name.git $env:appveyor_build_folder
        git fetch -q origin +refs/pull/$env:appveyor_pull_request_number/merge:
        git checkout -qf FETCH_HEAD
        git submodule update -q --init --recursive
      }

install:
  - cmd: GitVersion /output buildserver
  - ps: .\install.ps1 -ErrorAction Stop -InformationAction Continue -Verbose

build_script:
  - cmd: make

test_script:
  - cmd: make test

before_deploy:
  - ps: >-
      & GitReleaseNotes . /OutputFile ReleaseNotes.md;
      ${env:release_description} = ( Get-Content -LiteralPath ReleaseNotes.md -Encoding UTF8 ) -join "`n";

deploy:
  - provider: Environment
    name: GitHub-Releases
    description: $(release_description)
    artifact: fonts, ttf, doc, ctan, msi
    on:
      branch: master
      #appveyor_repo_tag: true
  - provider: Environment
    name: Chocolatey
    artifact: choco.fonts.install
    on:
      branch: master
      #appveyor_repo_tag: true
